<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scenario Recommender - PM Standards Hub</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">PM Standards Hub</a>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="repository.html" class="nav-link">Standards Repository</a>
                    <div class="dropdown">
                        <a href="repository.html#pmbok" class="dropdown-item">PMBOK 7</a>
                        <a href="repository.html#prince2" class="dropdown-item">PRINCE2</a>
                        <a href="repository.html#iso21500" class="dropdown-item">ISO 21500</a>
                        <a href="repository.html#iso21502" class="dropdown-item">ISO 21502</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="comparison.html" class="nav-link">Comparison</a>
                    <div class="dropdown">
                        <a href="comparison.html#risk" class="dropdown-item">Risk Management</a>
                        <a href="comparison.html#stakeholder" class="dropdown-item">Stakeholder Management</a>
                        <a href="comparison.html#quality" class="dropdown-item">Quality Management</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="dashboard.html" class="nav-link">Insights</a>
                </li>
                <li class="nav-item">
                    <a href="scenarios.html" class="nav-link">Scenarios</a>
                </li>
                <li class="nav-item">
                    <a href="admin.html" class="nav-link">Admin</a>
                </li>
            </ul>
            <div class="global-search">
                <input type="text" id="global-search" class="search-input" placeholder="Search standards...">
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <!-- PM Data Scenarios (Top Section) -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">PM Data Scenarios</h3>
            </div>
            <div class="form-group">
                <label for="pmdata-scenario" class="form-label">Choose a scenario</label>
                <select id="pmdata-scenario" class="form-select">
                    <option value="">Select a scenario</option>
                    <option value="custom_software">Custom Software Development Project</option>
                    <option value="innovative_product">Innovative Product Development Project</option>
                    <option value="government_project">Large Government Project</option>
                </select>
            </div>
            <div id="pmdata-content" class="section-text" style="padding: 1rem 0;"></div>
        </div>
        <div class="hero">
            <h1>Scenario Recommender</h1>
            <p>Get tailored project management recommendations based on your project characteristics and requirements.</p>
        </div>

        <!-- Scenario Form -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Project Characteristics</h3>
            </div>
            <form id="scenario-form">
                <div class="dashboard-grid">
                    <div class="form-group">
                        <label for="project-size" class="form-label">Project Size</label>
                        <select id="project-size" class="form-select" required>
                            <option value="">Select project size</option>
                            <option value="small">Small (1-10 team members, < 6 months)</option>
                            <option value="medium">Medium (10-50 team members, 6-18 months)</option>
                            <option value="large">Large (50-200 team members, 18+ months)</option>
                            <option value="enterprise">Enterprise (200+ team members, multi-year)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="project-complexity" class="form-label">Project Complexity</label>
                        <select id="project-complexity" class="form-select" required>
                            <option value="">Select complexity level</option>
                            <option value="low">Low (Simple, well-defined scope)</option>
                            <option value="medium">Medium (Moderate complexity, some unknowns)</option>
                            <option value="high">High (Complex, many interdependencies)</option>
                            <option value="very-high">Very High (Highly complex, many unknowns)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="risk-level" class="form-label">Risk Level</label>
                        <select id="risk-level" class="form-select" required>
                            <option value="">Select risk level</option>
                            <option value="low">Low (Minimal risk, proven technology)</option>
                            <option value="medium">Medium (Some risk, mixed technologies)</option>
                            <option value="high">High (Significant risk, new technologies)</option>
                            <option value="very-high">Very High (Extreme risk, cutting-edge)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="stakeholder-count" class="form-label">Stakeholder Count</label>
                        <select id="stakeholder-count" class="form-select" required>
                            <option value="">Select stakeholder count</option>
                            <option value="few">Few (1-5 stakeholders)</option>
                            <option value="moderate">Moderate (5-20 stakeholders)</option>
                            <option value="many">Many (20-50 stakeholders)</option>
                            <option value="extensive">Extensive (50+ stakeholders)</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="industry" class="form-label">Industry/Context</label>
                    <select id="industry" class="form-select">
                        <option value="">Select industry (optional)</option>
                        <option value="technology">Technology/Software</option>
                        <option value="construction">Construction/Infrastructure</option>
                        <option value="healthcare">Healthcare/Medical</option>
                        <option value="finance">Finance/Banking</option>
                        <option value="manufacturing">Manufacturing</option>
                        <option value="government">Government/Public Sector</option>
                        <option value="nonprofit">Non-profit</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Key Focus Areas (Select all that apply)</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="focus-risk" name="focus-areas" value="risk">
                            <label for="focus-risk">Risk Management</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="focus-quality" name="focus-areas" value="quality">
                            <label for="focus-quality">Quality Management</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="focus-stakeholder" name="focus-areas" value="stakeholder">
                            <label for="focus-stakeholder">Stakeholder Management</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="focus-communication" name="focus-areas" value="communication">
                            <label for="focus-communication">Communication Management</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="focus-change" name="focus-areas" value="change">
                            <label for="focus-change">Change Management</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="focus-resource" name="focus-areas" value="resource">
                            <label for="focus-resource">Resource Management</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Generate Recommendations</button>
                    <button type="button" onclick="clearForm()" class="btn btn-secondary">Clear Form</button>
                </div>
            </form>
        </div>

        <!-- Recommendations Results -->
        <div class="card" id="recommendations-card" style="display: none;">
            <div class="card-header">
                <h3 class="card-title">Recommended Approach</h3>
            </div>
            <div id="recommendations-content">
                <!-- Recommendations will be populated here -->
            </div>
        </div>

        <!-- Example Scenarios -->
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Example Scenarios</h3>
            </div>
            <div class="dashboard-grid">
                <div class="comparison-card" onclick="loadExampleScenario('startup')">
                    <div class="standard-header">
                        <div class="standard-name">Startup Software Project</div>
                    </div>
                    <div class="comparison-content">
                        <p><strong>Small, Low Risk, Agile</strong></p>
                        <p>Fast-paced development with minimal bureaucracy</p>
                        <a href="#" class="btn btn-link">Load Example</a>
                    </div>
                </div>

                <div class="comparison-card" onclick="loadExampleScenario('enterprise')">
                    <div class="standard-header">
                        <div class="standard-name">Enterprise Transformation</div>
                    </div>
                    <div class="comparison-content">
                        <p><strong>Large, High Risk, Structured</strong></p>
                        <p>Complex organizational change with multiple stakeholders</p>
                        <a href="#" class="btn btn-link">Load Example</a>
                    </div>
                </div>

                <div class="comparison-card" onclick="loadExampleScenario('construction')">
                    <div class="standard-header">
                        <div class="standard-name">Infrastructure Project</div>
                    </div>
                    <div class="comparison-content">
                        <p><strong>Medium, Medium Risk, Traditional</strong></p>
                        <p>Construction or infrastructure development</p>
                        <a href="#" class="btn btn-link">Load Example</a>
                    </div>
                </div>

                <div class="comparison-card" onclick="loadExampleScenario('research')">
                    <div class="standard-header">
                        <div class="standard-name">Research & Development</div>
                    </div>
                    <div class="comparison-content">
                        <p><strong>Medium, Very High Risk, Innovative</strong></p>
                        <p>R&D project with high uncertainty</p>
                        <a href="#" class="btn btn-link">Load Example</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="background: var(--primary-navy); color: var(--white); padding: 2rem; text-align: center; margin-top: 4rem;">
        <p>&copy; 2024 PM Standards Hub. A comprehensive project management standards comparison tool.</p>
    </footer>

    <script src="js/app.js"></script>
    <script>
        // Load and render pmdata.txt scenario content
        const pmdataIndex = {
            custom_software: 'Custom Software Development Project',
            innovative_product: 'Innovative Product Development Project',
            government_project: 'Large Government Project'
        };

        document.addEventListener('DOMContentLoaded', () => {
            const selector = document.getElementById('pmdata-scenario');
            if (selector) {
                selector.addEventListener('change', async (e) => {
                    const key = e.target.value;
                    if (!key) {
                        document.getElementById('pmdata-content').innerHTML = '';
                        return;
                    }
                    await loadPmData(key);
                });
            }
        });

        async function loadPmData(key) {
            try {
                const title = pmdataIndex[key];

                // 1) Prefer per-scenario file override if present
                const perScenario = await (async () => {
                    // Prefer HTML files for full custom formatting (embed via iframe)
                    let url = `/assets/pmdata/${key}.html`;
                    if (await exists(url)) return { type: 'html', url };
                    url = `/assets/pm%20data/${key}.html`;
                    if (await exists(url)) return { type: 'html', url };
                    url = `/assets/${key}.html`;
                    if (await exists(url)) return { type: 'html', url };
                    // Fallback to text files
                    let t = await fetchText(`/assets/pmdata/${key}.txt`);
                    if (t) return { type: 'txt', content: t };
                    t = await fetchText(`/assets/pm%20data/${key}.txt`);
                    if (t) return { type: 'txt', content: t };
                    t = await fetchText(`/assets/${key}.txt`);
                    if (t) return { type: 'txt', content: t };
                    return null;
                })();
                if (perScenario) {
                    if (perScenario.type === 'html') {
                        document.getElementById('pmdata-content').innerHTML = renderPmDataIframe(title, perScenario.url);
                    } else {
                        document.getElementById('pmdata-content').innerHTML = renderPmData(title, perScenario.content);
                    }
                    return;
                }

                // 2) Fallback to single pmdata.txt and try to extract matching section
                const fallbackRaw = await fetchText('/assets/pmdata.txt');
                if (!fallbackRaw) {
                    document.getElementById('pmdata-content').innerHTML = '<p class="text-light">PM data file not found.</p>';
                    return;
                }

                const extracted = extractScenarioSection(fallbackRaw, title);
                document.getElementById('pmdata-content').innerHTML = renderPmData(title, extracted);
            } catch (err) {
                document.getElementById('pmdata-content').innerHTML = '<p class="text-light">Unable to load PM data.</p>';
                console.error('PM data load error:', err);
            }
        }

        async function fetchText(url) {
            try {
                const res = await fetch(url);
                if (!res.ok) return null;
                return await res.text();
            } catch { return null; }
        }

        async function exists(url) {
            try {
                const res = await fetch(url, { method: 'HEAD' });
                return res.ok;
            } catch { return false; }
        }

        function extractScenarioSection(rawText, title) {
            // Try parser 1: markdown headings ### <title>
            const byHash = parsePmData(rawText);
            if (byHash[title]) return byHash[title];

            // Try parser 2: plain title line anchors (case-insensitive)
            const lines = rawText.split(/\r?\n/);
            const norm = (s) => String(s).trim().toLowerCase();
            const target = norm(title);
            let capturing = false;
            const buf = [];
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                const isHeader = norm(line).replace(/^#+\s*/, '') === target;
                if (isHeader) { capturing = true; continue; }
                // Stop when next obvious header starts
                const looksLikeHeader = /^#{2,}\s+/.test(line) || /^\s*[-=]{3,}\s*$/.test(line) || /^\s*[A-Z].+:\s*$/.test(line);
                if (capturing && isHeader === false && looksLikeHeader) break;
                if (capturing) buf.push(line);
            }
            if (buf.length > 0) return buf.join('\n');

            // Fallback 3: return full text as-is
            return rawText;
        }

        function parsePmData(text) {
            // Expected format: sections delimited by lines starting with ### <Scenario Title>
            const lines = text.split(/\r?\n/);
            const sections = {};
            let current = '';
            let buffer = [];
            lines.forEach(line => {
                const headerMatch = line.match(/^###\s+(.+)/);
                if (headerMatch) {
                    if (current) sections[current] = buffer.join('\n');
                    current = headerMatch[1].trim();
                    buffer = [];
                } else {
                    buffer.push(line);
                }
            });
            if (current) sections[current] = buffer.join('\n');
            return sections;
        }

        function renderPmData(title, content) {
            // Single formatted block without stage boxes
            const fullHtml = formatTextToHtml(content);
            return `
                <div class="section-content active" style="text-align: left;">
                    <div class="section-header">
                        <div class="section-title">${title}</div>
                        <div class="section-reference"><em>Designed using PMBOK 7, PRINCE2, ISO 21500/21502</em></div>
                    </div>
                    <div class="section-text">${fullHtml}</div>
                </div>
            `;
        }

        function renderPmDataIframe(title, url) {
            return `
                <div class="section-content active" style="text-align: left;">
                    <div class="section-header">
                        <div class="section-title">${title}</div>
                        <div class="section-reference"><em>Designed using PMBOK 7, PRINCE2, ISO 21500/21502</em></div>
                    </div>
                    <div class="section-text">
                        <iframe src="${url}" style="width: 100%; height: 1400px; border: 0; background: white;"></iframe>
                    </div>
                </div>
            `;
        }

        function escapeHtml(text) {
            return text
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');
        }

        function formatTextToHtml(text) {
            // Preserve text then do minimal formatting
            let html = escapeHtml(text);
            // Markdown-style headings only
            html = html.replace(/^######\s+(.+)$/gm, '<h6>$1</h6>')
                       .replace(/^#####\s+(.+)$/gm, '<h5>$1</h5>')
                       .replace(/^####\s+(.+)$/gm, '<h4>$1</h4>')
                       .replace(/^###\s+(.+)$/gm, '<h3>$1</h3>');
            // Bulleted lists
            html = html.replace(/^\s*[-*]\s+(.+)$/gm, '<li>$1</li>');
            html = html.replace(/(?:<li>.*?<\/li>\s*)+/gs, (m) => `<ul>${m}</ul>`);
            // Preserve newlines
            html = html.replace(/\n/g, '<br>');
            return html;
        }

        function extractStages(text) {
            const stages = [];
            const lines = text.split(/\r?\n/);
            const norm = (s) => String(s).trim().toLowerCase();

            // Strategy A: Look for a "Phases" or "Stages" header then list items under it
            let i = 0;
            while (i < lines.length) {
                const l = lines[i];
                if (/^\s*#{2,}\s*(phases|stages)\b/i.test(l) || /^\s*(phases|stages)\s*:\s*$/i.test(l)) {
                    i++;
                    // Collect bullet/numbered list
                    while (i < lines.length && (/^\s*[-*]\s+/.test(lines[i]) || /^\s*\d+\./.test(lines[i]))) {
                        const item = lines[i].replace(/^\s*[-*]\s+/, '').replace(/^\s*\d+\.\s*/, '').trim();
                        if (item) stages.push({ name: item, details: '' });
                        i++;
                    }
                    break;
                }
                i++;
            }

            // Strategy B: Single-line arrow-separated phases
            if (stages.length === 0) {
                const arrowLine = lines.find(line => /\b(phases|stages)\b.*?[:：]/i.test(line) && /\->|→|⇒|›|››/.test(line));
                if (arrowLine) {
                    const afterColon = arrowLine.split(/[:：]/).slice(1).join(':');
                    afterColon.split(/\s*(?:->|→|⇒|›|››)\s*/).forEach(seg => {
                        const name = seg.trim();
                        if (name) stages.push({ name, details: '' });
                    });
                }
            }

            // Strategy C: Common phase words in a compressed list line
            if (stages.length === 0) {
                const listLine = lines.find(line => /inception|discovery|definition|procurement|delivery|stabilization|commissioning|closeout|scale\-?up/i.test(line) && /,|\s->\s/.test(line));
                if (listLine) {
                    listLine.split(/,|\s->\s/).forEach(seg => {
                        const name = seg.trim().replace(/^and\s+/i, '');
                        if (name) stages.push({ name, details: '' });
                    });
                }
            }

            return stages;
        }

        function extractStageSectionsRobust(text, stageNames) {
            const lines = text.split(/\r?\n/);
            const norm = (s) => String(s).trim().toLowerCase();
            const indices = [];

            // Numbered or labeled headings (Stage N:, 1., 1.1.)
            for (let i = 0; i < lines.length; i++) {
                const l = lines[i];
                if (/^\s*(Stage\s*\d+[:\-])\s+/.test(l)) {
                    indices.push({ name: l.replace(/^\s*Stage\s*\d+[:\-]\s+/, '').trim(), line: i });
                } else if (/^\s*\d+(?:\.\d+)*\.\s+/.test(l)) {
                    indices.push({ name: l.replace(/^\s*\d+(?:\.\d+)*\.\s+/, '').trim(), line: i });
                }
            }

            // If not found, align to explicit stageNames as headings
            if (indices.length === 0 && Array.isArray(stageNames) && stageNames.length) {
                for (let i = 0; i < lines.length; i++) {
                    const raw = lines[i];
                    const headerMatch = raw.match(/^\s*(?:#{1,6}\s*)?(.*\S)\s*:?\s*$/);
                    if (!headerMatch) continue;
                    const title = norm(headerMatch[1]);
                    const matched = stageNames.find(n => norm(n) === title || title.includes(norm(n)) || norm(n).includes(title));
                    if (matched) indices.push({ name: matched, line: i });
                }
            }

            if (indices.length === 0) return [];

            // Slice sections between indices
            const rawSections = [];
            for (let idx = 0; idx < indices.length; idx++) {
                const start = indices[idx].line + 1;
                const end = (idx + 1 < indices.length) ? indices[idx + 1].line : lines.length;
                const chunk = lines.slice(start, end).join('\n').trim();
                rawSections.push({ name: indices[idx].name, details: chunk });
            }

            // Order by stageNames if provided
            let ordered = rawSections;
            if (Array.isArray(stageNames) && stageNames.length) {
                const byKey = new Map();
                rawSections.forEach(s => byKey.set(norm(s.name), s));
                ordered = stageNames.map(n => byKey.get(norm(n)) || { name: n, details: '' });
            }

            return ordered.map(s => ({ name: s.name, detailsHtml: formatTextToHtml(s.details || '') }));
        }
        // Scenario specific functionality
        document.addEventListener('DOMContentLoaded', () => {
            setupScenarioForm();
        });

        function setupScenarioForm() {
            const form = document.getElementById('scenario-form');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                generateRecommendations();
            });
        }

        function generateRecommendations() {
            const formData = {
                projectSize: document.getElementById('project-size').value,
                complexity: document.getElementById('project-complexity').value,
                riskLevel: document.getElementById('risk-level').value,
                stakeholderCount: document.getElementById('stakeholder-count').value,
                industry: document.getElementById('industry').value,
                focusAreas: Array.from(document.querySelectorAll('input[name="focus-areas"]:checked')).map(cb => cb.value)
            };

            const recommendations = analyzeScenario(formData);
            displayRecommendations(recommendations);
        }

        function analyzeScenario(scenario) {
            const recommendations = {
                primaryFramework: '',
                secondaryFrameworks: [],
                keyProcesses: [],
                riskApproach: '',
                stakeholderApproach: '',
                qualityApproach: '',
                rationale: ''
            };

            // Determine primary framework based on scenario
            if (scenario.projectSize === 'small' && scenario.complexity === 'low') {
                recommendations.primaryFramework = 'PMBOK 7';
                recommendations.rationale = 'Small, simple projects benefit from PMBOK\'s flexible approach';
            } else if (scenario.projectSize === 'large' && scenario.riskLevel === 'high') {
                recommendations.primaryFramework = 'PRINCE2';
                recommendations.rationale = 'Large, high-risk projects require PRINCE2\'s structured governance';
            } else if (scenario.industry === 'government' || scenario.stakeholderCount === 'extensive') {
                recommendations.primaryFramework = 'ISO 21500';
                recommendations.rationale = 'Government and extensive stakeholder projects align with ISO standards';
            } else if (scenario.projectSize === 'enterprise' || scenario.complexity === 'very-high') {
                recommendations.primaryFramework = 'ISO 21502';
                recommendations.rationale = 'Enterprise and highly complex projects benefit from ISO 21502\'s comprehensive approach';
            } else {
                recommendations.primaryFramework = 'PMBOK 7';
                recommendations.rationale = 'PMBOK 7 provides a balanced approach for most project types';
            }

            // Determine secondary frameworks
            if (scenario.riskLevel === 'high' || scenario.focusAreas.includes('risk')) {
                recommendations.secondaryFrameworks.push('PRINCE2 (Risk Management)');
            }
            if (scenario.stakeholderCount === 'many' || scenario.focusAreas.includes('stakeholder')) {
                recommendations.secondaryFrameworks.push('ISO 21500 (Stakeholder Management)');
            }
            if (scenario.focusAreas.includes('quality')) {
                recommendations.secondaryFrameworks.push('ISO 21502 (Quality Management)');
            }

            // Key processes based on focus areas
            if (scenario.focusAreas.includes('risk')) {
                recommendations.keyProcesses.push('Risk Management Planning');
                recommendations.keyProcesses.push('Risk Identification and Assessment');
                recommendations.keyProcesses.push('Risk Response Planning');
            }
            if (scenario.focusAreas.includes('stakeholder')) {
                recommendations.keyProcesses.push('Stakeholder Identification');
                recommendations.keyProcesses.push('Stakeholder Engagement Planning');
                recommendations.keyProcesses.push('Stakeholder Communication');
            }
            if (scenario.focusAreas.includes('quality')) {
                recommendations.keyProcesses.push('Quality Planning');
                recommendations.keyProcesses.push('Quality Assurance');
                recommendations.keyProcesses.push('Quality Control');
            }

            // Risk approach
            if (scenario.riskLevel === 'low') {
                recommendations.riskApproach = 'Basic risk identification and monitoring';
            } else if (scenario.riskLevel === 'medium') {
                recommendations.riskApproach = 'Structured risk management with regular reviews';
            } else {
                recommendations.riskApproach = 'Comprehensive risk management with dedicated risk team';
            }

            // Stakeholder approach
            if (scenario.stakeholderCount === 'few') {
                recommendations.stakeholderApproach = 'Direct communication and engagement';
            } else if (scenario.stakeholderCount === 'moderate') {
                recommendations.stakeholderApproach = 'Structured stakeholder management with communication plan';
            } else {
                recommendations.stakeholderApproach = 'Comprehensive stakeholder analysis and engagement strategy';
            }

            // Quality approach
            if (scenario.industry === 'technology') {
                recommendations.qualityApproach = 'Agile quality practices with continuous testing';
            } else if (scenario.industry === 'construction') {
                recommendations.qualityApproach = 'Traditional quality control with inspections';
            } else {
                recommendations.qualityApproach = 'Balanced quality management approach';
            }

            return recommendations;
        }

        function displayRecommendations(recommendations) {
            const card = document.getElementById('recommendations-card');
            const content = document.getElementById('recommendations-content');

            content.innerHTML = `
                <div class="recommendation-section">
                    <h4>Primary Framework: ${recommendations.primaryFramework}</h4>
                    <p>${recommendations.rationale}</p>
                </div>

                ${recommendations.secondaryFrameworks.length > 0 ? `
                <div class="recommendation-section">
                    <h4>Secondary Frameworks</h4>
                    <ul>
                        ${recommendations.secondaryFrameworks.map(framework => `<li>${framework}</li>`).join('')}
                    </ul>
                </div>
                ` : ''}

                <div class="recommendation-section">
                    <h4>Key Processes to Implement</h4>
                    <ul>
                        ${recommendations.keyProcesses.map(process => `<li>${process}</li>`).join('')}
                    </ul>
                </div>

                <div class="recommendation-section">
                    <h4>Risk Management Approach</h4>
                    <p>${recommendations.riskApproach}</p>
                </div>

                <div class="recommendation-section">
                    <h4>Stakeholder Management Approach</h4>
                    <p>${recommendations.stakeholderApproach}</p>
                </div>

                <div class="recommendation-section">
                    <h4>Quality Management Approach</h4>
                    <p>${recommendations.qualityApproach}</p>
                </div>

                <div class="recommendation-actions">
                    <a href="comparison.html" class="btn btn-primary">Compare Standards</a>
                    <a href="repository.html" class="btn btn-secondary">View Standards</a>
                </div>
            `;

            card.style.display = 'block';
            card.scrollIntoView({ behavior: 'smooth' });
        }

        function clearForm() {
            document.getElementById('scenario-form').reset();
            document.getElementById('recommendations-card').style.display = 'none';
        }

        function loadExampleScenario(type) {
            const examples = {
                startup: {
                    projectSize: 'small',
                    complexity: 'low',
                    riskLevel: 'medium',
                    stakeholderCount: 'few',
                    industry: 'technology',
                    focusAreas: ['communication', 'change']
                },
                enterprise: {
                    projectSize: 'enterprise',
                    complexity: 'very-high',
                    riskLevel: 'high',
                    stakeholderCount: 'extensive',
                    industry: 'other',
                    focusAreas: ['risk', 'stakeholder', 'quality', 'change']
                },
                construction: {
                    projectSize: 'medium',
                    complexity: 'medium',
                    riskLevel: 'medium',
                    stakeholderCount: 'moderate',
                    industry: 'construction',
                    focusAreas: ['quality', 'risk', 'resource']
                },
                research: {
                    projectSize: 'medium',
                    complexity: 'high',
                    riskLevel: 'very-high',
                    stakeholderCount: 'moderate',
                    industry: 'other',
                    focusAreas: ['risk', 'communication', 'change']
                }
            };

            const example = examples[type];
            if (example) {
                // Populate form with example data
                document.getElementById('project-size').value = example.projectSize;
                document.getElementById('project-complexity').value = example.complexity;
                document.getElementById('risk-level').value = example.riskLevel;
                document.getElementById('stakeholder-count').value = example.stakeholderCount;
                document.getElementById('industry').value = example.industry;
                
                // Clear existing checkboxes
                document.querySelectorAll('input[name="focus-areas"]').forEach(cb => cb.checked = false);
                
                // Check relevant focus areas
                example.focusAreas.forEach(area => {
                    const checkbox = document.getElementById(`focus-${area}`);
                    if (checkbox) checkbox.checked = true;
                });

                // Generate recommendations
                generateRecommendations();
            }
        }
    </script>
</body>
</html>

